"use strict";angular.module("newAngApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","mySocket"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("newAngApp").controller("MainCtrl",["$scope","$location","$http","$interval","$timeout","socket",function(a,b,c,d,e,f){a.templates={available:["main","instas","tweet","tweet_socket"],active:"views/main.html",activeIndex:0},console.log(a.templates),a.term="";var g="http://mediadashapi.herokuapp.com/";a.tweets={available:[],activeIndex:0,active:null},a.instas={available:[],activeIndex:0,active:null};var h=function(){c.get(a.tweetUrl).success(function(b){a.tweets.available=b,a.tweets.activeIndex=0,a.tweets.active=a.tweets.available[0],k()})};a.streamTweets=function(){console.log("tweeted!"),c.get(a.streamTweetUrl).success(function(a){console.log(a)})},a.incomingTweets=function(){var b=[],c=0;f.on("tweet",function(a){b.push(a[0])}),d(function(){a.streamedTweet=b[c];var d=b.indexOf(a.streamedTweet);c=d+1===b.length?d:d+1},5e3)};var i=function(){c.get(a.instaUrl).success(function(b){console.log(b),a.instas.available=b,j(1),l()})};a.submit=function(b){a.term=b.replace(/\#/,""),a.tweetUrl=g+"twitter?term="+a.term,a.instaUrl=g+"insta?term="+a.term,a.streamTweetUrl=g+"twitter_stream?term="+a.term,a.getInstas(),a.getTweets(),a.streamTweets(),a.incomingTweets(),i(),h(),a.changeActiveTemplate(1)};var j=function(b){a.templates.active="views/"+a.templates.available[b]+".html",a.templates.activeIndex=b};a.previousTemplate=function(){a.templates.activeIndex>0&&j(a.templates.activeIndex-1)},a.nextTemplate=function(){a.templates.activeIndex<a.templates.available.length-1&&j(a.templates.activeIndex+1)},a.parseDate=function(a){return Date.parse(a)};var k=function(){d(function(){a.tweets.activeIndex<a.tweets.available.length-1?(a.tweets.activeIndex=a.tweets.activeIndex+1,a.tweets.active=a.tweets.available[a.tweets.activeIndex]):(a.tweets.activeIndex=0,a.tweets.active=a.tweets.available[0])},8e3)},l=function(){e(function(){var b=g+"instaLatest?term="+a.term+"&maxTimestamp="+a.instas.available[a.instas.available.length-1].timestamp;console.log(b),c.get(b).success(function(b){for(var c=0;c<b.length;c++)a.instas.available.push(b[c]);console.log(a.instas.available),a.instas.activeIndex=0,a.instas.active=a.instas.available[0],l()})},6e4)}}]),angular.module("newAngApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("newAngApp").animation(".fade",function(){return{enter:function(a,b){return a.css("opacity",0),jQuery(a).animate({opacity:1},b),function(b){b&&jQuery(a).stop()}},leave:function(a,b){return a.css("opacity",1),jQuery(a).animate({opacity:0},b),function(b){b&&jQuery(a).stop()}},move:function(a,b){return a.css("opacity",0),jQuery(a).animate({opacity:1},b),function(b){b&&jQuery(a).stop()}},addClass:function(){},removeClass:function(){}}}),angular.module("mySocket",[]).factory("socket",["$rootScope",function(a){var b=io.connect("http://mediadashapi.herokuapp.com");return{on:function(c,d){b.on(c,function(){var c=arguments;a.$apply(function(){d.apply(b,c)})})}}}]);